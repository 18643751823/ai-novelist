# AI 小说家项目规划

## 1. 整体架构与技术栈

*   **桌面应用框架**：Electron (结合前端框架React)
*   **前端**：TypeScript (搭配所选框架)
*   **后端 (AI 逻辑)**：Node.js
*   **文件系统交互**：通过后端调用某个node.js模块
*   **文件格式**：Markdown/html (用于章节内容)

## 2. 前端用户界面 (UI) 模块

*   **布局**：仿照vscode等ide的左中右三栏布局，2：6：2（支持用户拖动中间的分界线，自由调整比例/支持折叠左右栏）
    *   **左侧：章节目录/文件管理区**：
        *   显示：小说章节列表（可折叠树形结构），显示文件信息。
        *   功能：新建章节、删除章节、重命名章节、章节排序等。
        *   交互：点击章节加载内容到右侧编辑区。
    *   **中间：小说正文编辑框**：
        *   功能：支持 Markdown 语法高亮、实时预览、字数统计、自动保存。
        *   **编辑器组件推荐**：
            *   **Monaco Editor**：功能强大，与 VS Code 体验相似，适合代码和 Markdown 编辑。
            *   **CodeMirror 6 / ProseMirror**：更灵活，可定制性强，社区活跃。
            *   **Editor.js / Tiptap**：块编辑器，如果需要更丰富的富文本编辑体验。
        *   **建议优先考虑 Monaco Editor**，因为它在 Markdown 编辑方面功能强大且用户体验良好。
    *   **右侧：用户与 AI 交互聊天框**：
        *   功能：对话输入框（用户输入指令）、对话历史显示区（显示用户提问和 AI 回复）。
        *   样式：类似聊天应用的界面，支持 AI 输出的富文本/Markdown 渲染。


## 3. 后端 AI 逻辑服务 (Node.js)

*   **核心模块**：
    *   **意图理解模块**：
        *   功能：解析用户在交互框中输入的自然语言指令。
        *   技术：将根据用户提供的大模型 API 文档进行集成。
    *   **MCP 文件系统交互模块**：
        *   功能：封装对 某个node.js模块进行调用，以实现文件系统交互。
 的调用。
    
    *   **小说业务逻辑模块**：
        *   功能：根据 AI 理解的指令和文件系统操作结果，维护小说的结构（例如，在创建新章节时更新内部章节索引，确保 Markdown 文件的正确路径和内容）。

## 4. 前后端通信与部署

*   **通信方案**：
    *   **Electron IPC (Inter-Process Communication)**：前端 (Renderer Process) 与后端 (Main Process/Node.js AI Logic) 之间进行通信。
        *   **何时使用**：用于 UI 触发 AI 逻辑，或 AI 逻辑向 UI 发送更新通知。
        *   **优势**：安全、高效，特别适合桌面应用内部通信。
    *   **HTTP/HTTPS**: 如果 AI 逻辑需要与外部（例如，用户提供的大模型 API）进行通信时使用。
*   **部署方式**：
    *   **桌面应用打包**：使用 Electron Packager 或 Electron Builder 将整个应用（包括前端 UI、Node.js 后端逻辑）打包成一个独立的安装程序 (Windows `.exe`, macOS `.dmg`, Linux `.deb`/`.AppImage`)。

## 5. 数据结构与文件存储

*   **章节内容**：
    *   存储为独立的 Markdown (`.md`) 文件，位于 `D:\ai小说家` 目录下。
    *   文件命名规则：建议使用 `[章节序号]_[章节标题].md`，例如 `01_第一章_故事开端.md`。
*   **小说元数据**：
    *   一个 JSON 或 YAML 文件（例如 `novel_metadata.json`），存储小说整体信息（标题、作者、简介、章节列表及顺序）。


